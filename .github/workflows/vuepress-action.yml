name: CI

# 控制如何触发事件，这里针对 master 分支
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

# 一个工作流运行是由一个或多个作业组成的，这些作业可以连续或并行运行。
jobs:
  # 该工作流包含一个名为 "build " 的单一工作。
  build:
    # 工作要运行的运行器类型。
    runs-on: ubuntu-latest

    # 步骤代表了作为工作的一部分将要执行的任务序列
    steps:

    # 打包并推送到 githubpages
    - name: Build and Deploy GitHub Pages
      uses: tuojinhui/tuojinhui.github.io@master
      env:
        ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
        BRANCH: gh-pages
        FOLDER: build/.vuepress/dist
        BUILD_SCRIPT: npm install && npm run docs:build
